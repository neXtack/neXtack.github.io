(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{517:function(a,t,s){"use strict";s.r(t);var e=s(6),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#场景"}},[a._v("#")]),a._v(" 场景")]),a._v(" "),s("p",[a._v("上篇介绍了Spring XML配置文件的校验是怎么做的，提到了XSD文件，那这个就来看看这个"),s("code",[a._v("spring-beans.xsd")]),a._v("文件到底定义了什么？我在配置Spring的时候，都能配置哪些东西？")]),a._v(" "),s("h2",{attrs:{id:"分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分析"}},[a._v("#")]),a._v(" 分析")]),a._v(" "),s("p",[s("code",[a._v("XSD")]),a._v("还是比较简单的，它本身就是一个XML文件，不过"),s("code",[a._v("XSD")]),a._v("是一种有约束的配置文件，也就是说它的格式是规定好的，有哪些节点，节点可以有哪些属性，都规范好了。")]),a._v(" "),s("p",[a._v("以固定格式的XSD，规范无固定格式的XML，又不牺牲其灵活性，不得不说，这种思路，很神奇。")]),a._v(" "),s("p",[a._v("直接看"),s("code",[a._v("spring-beans.xsd")]),a._v("，这个文件的路径是"),s("code",[a._v("spring-beans/org/springframework/beans/factory/xml/spring-beans.xsd")]),a._v("。")]),a._v(" "),s("p",[a._v("打开这个文件，不得不说，注释是真多，所以这个文件就是给开发者看的，可惜，我以前从来没有看过。")]),a._v(" "),s("p",[a._v("先看上面的注释中的标题："),s("code",[a._v("Spring XML Beans Schema, version 4.3")]),a._v("，我"),s("code",[a._v("Spring")]),a._v("版本使用的是"),s("code",[a._v("5.3.6")]),a._v("，但是这个"),s("code",[a._v("Schema")]),a._v("的版本还是"),s("code",[a._v("4.3")]),a._v("，看来"),s("code",[a._v("5.x")]),a._v("以来，对于"),s("code",[a._v("BeanDefinition")]),a._v("应该是没有什么改动的。")]),a._v(" "),s("blockquote",[s("p",[a._v("这里记录一些题外话，为什么我要从基本过时的XML开始学习，因为这是Spring的最开始的样子。\n从这里开始学习，涉及到的概念可能会少一些，精力可以更专注一些，抛出分支剧情，直指核心问题，然后再逐步增加新特性，一步一步扩展开来。")])]),a._v(" "),s("h3",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[a._v("#")]),a._v(" 概述")]),a._v(" "),s("p",[a._v("这开头的一段话，信息量还是蛮大的，简单总结一下。")]),a._v(" "),s("p",[a._v("开篇明义，"),s("em",[a._v("这个文件就是定义Spring容器管理的Bean对象的，还交代了这个文件是"),s("code",[a._v("XmlBeanDefinitionReader")]),a._v("中"),s("code",[a._v("DefaultBeanDefinitionDocumentReader")]),a._v("使用的。")])]),a._v(" "),s("p",[a._v("这里直接交代了"),s("code",[a._v("bean")]),a._v("节点的本质："),s("em",[a._v("每个"),s("code",[a._v("bean")]),a._v("节点都定义了一个"),s("code",[a._v("JavaBean")]),a._v("。")])]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"},[a._v("JavaBean")]),s("p",[s("code",[a._v("JavaBean")]),a._v("是一个"),s("a",{attrs:{href:"https://www.oracle.com/java/technologies/javase/javabeans-spec.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("规范"),s("OutboundLink")],1),a._v("，是有一定要求的：")]),a._v(" "),s("ol",[s("li",[a._v("可序列化，即实现了"),s("code",[a._v("java.io.Serializable")])]),a._v(" "),s("li",[a._v("无参构造器")]),a._v(" "),s("li",[a._v("私有属性配合"),s("code",[a._v("getter & setter")])])]),a._v(" "),s("p",[s("code",[a._v("JavaBean")]),a._v("其目的就是封装一系列的数据，提供公开的读写方式，达到组件重用的目的。\n说白了，就是一种"),s("code",[a._v("数据结构")]),a._v("，或者说是"),s("code",[a._v("结构数据")]),a._v("。")])]),s("p",[a._v("这个"),s("code",[a._v("JavaBean")]),a._v("在这里没有明说，但其实就是"),s("code",[a._v("BeanDefinition")]),a._v("，那这里也就明确了"),s("code",[a._v("BeanDefinition")]),a._v("的角色和功能。")]),a._v(" "),s("p",[a._v("然后，文档又讲到:"),s("em",[s("code",[a._v("bean实例")]),a._v("分为"),s("code",[a._v("单例")]),a._v("和"),s("code",[a._v("原型")]),a._v("，但是可以通过扩展提供更多的"),s("code",[a._v("Scope")]),a._v("。")])]),a._v(" "),s("p",[s("em",[a._v("而且，"),s("code",[a._v("bean")]),a._v("是可以互相引用的，可以作为其他"),s("code",[a._v("bean")]),a._v("的属性或者参数，但是仅限在同一"),s("code",[a._v("BeanFactory")]),a._v("或者"),s("code",[a._v("祖先BeanFactory")]),a._v("中。")])]),a._v(" "),s("p",[s("em",[a._v("除了"),s("code",[a._v("引用")]),a._v("，还可以建立"),s("code",[a._v("内部bean")]),a._v("，仅限包裹它的"),s("code",[a._v("bean")]),a._v("作用域内使用。")])]),a._v(" "),s("p",[s("em",[a._v("同样支持"),s("code",[a._v("list")]),a._v("、"),s("code",[a._v("set")]),a._v("、"),s("code",[a._v("map")]),a._v("、"),s("code",[a._v("properties")]),a._v("类型。")])]),a._v(" "),s("p",[a._v("这个概述全是干货。")]),a._v(" "),s("p",[a._v("下面就是定义文档结构的。")]),a._v(" "),s("h3",{attrs:{id:"beans"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#beans"}},[a._v("#")]),a._v(" beans")]),a._v(" "),s("p",[a._v("我一直觉得，而且也一直是这么用的："),s("code",[a._v("beans")]),a._v("属于根结点。\n其实这种表述不是那么正确，文档是这么描述的："),s("em",[s("code",[a._v("beans")]),a._v("是"),s("code",[a._v("<bean>")]),a._v("和其他一些元素的容器，"),s("code",[a._v("通常")]),a._v("作为文档根结点。")])]),a._v(" "),s("p",[a._v("另外，之前一直没有注意和使用过，"),s("code",[a._v("beans")]),a._v("节点不仅是作为根结点使用的，还可以设置默认属性，供内部定义的"),s("code",[a._v("bean")]),a._v("使用。而且"),s("code",[a._v("beans")]),a._v("是可以嵌套"),s("code",[a._v("beans")]),a._v("的，可以对部分"),s("code",[a._v("bean")]),a._v("设置默认值，也可以通过"),s("code",[a._v("profile")]),a._v("的形式，启用或关闭某些"),s("code",[a._v("bean")]),a._v("。")]),a._v(" "),s("blockquote",[s("p",[a._v("XSD不仅定义文档节点和属性，同样可以定义节点出现的顺序和次数。")])]),a._v(" "),s("h4",{attrs:{id:"子节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#子节点"}},[a._v("#")]),a._v(" 子节点")]),a._v(" "),s("h5",{attrs:{id:"description"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#description"}},[a._v("#")]),a._v(" description")]),a._v(" "),s("p",[a._v("描述信息，可选的，至多出现一次。\n如果出现了该节点，则必须放在"),s("code",[a._v("第一个")]),a._v("。")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 这里不会有其他节点 --\x3e")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("这个配置文件用于拯救地球"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 从这开始定义其他节点 --\x3e")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),s("h5",{attrs:{id:"beans-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#beans-2"}},[a._v("#")]),a._v(" beans")]),a._v(" "),s("p",[a._v("上面说的嵌套的"),s("code",[a._v("beans")]),a._v("节点，也是可选的，至多N次。\n如果出现该节点，该节点要放在文档的最后。")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 这里可以定义其他节点 --\x3e")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 一堆配置 --\x3e")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 这里不能再定义其他节点了 --\x3e")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 一堆配置 --\x3e")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 这里不能再定义其他节点了 --\x3e")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),s("h5",{attrs:{id:"import"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#import"}},[a._v("#")]),a._v(" import")]),a._v(" "),s("p",[a._v("导入一个XML配置资源，可选，至多N次。")]),a._v(" "),s("p",[a._v("当Spring XML配置文件过大，元素过多时，将其分割成多个配置文件便于维护，然后使用"),s("code",[a._v("import")]),a._v("的方式，将其汇总。")]),a._v(" "),s("p",[s("code",[a._v("import")]),a._v("节点有个"),s("code",[a._v("resource")]),a._v("属性，用于指定"),s("code",[a._v("资源路径")]),a._v("。")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("resource")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("other.xml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("resource")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("../other.xml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("resource")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("classpath:other.xml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("resource")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("classpath*:spring*.xml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),s("p",[a._v("这个支持多种格式，能支持多少种，之后看代码实现吧。")]),a._v(" "),s("h5",{attrs:{id:"alias"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#alias"}},[a._v("#")]),a._v(" alias")]),a._v(" "),s("p",[a._v("定义别名，可选，至多N次。")]),a._v(" "),s("p",[a._v("这个可以被"),s("code",[a._v("bean")]),a._v("定义别名，而且是可以跨配置文件的，上面"),s("code",[a._v("import")]),a._v("那种情况也是可以的。")]),a._v(" "),s("p",[s("code",[a._v("alias")]),a._v("有两个属性："),s("code",[a._v("name")]),a._v("和"),s("code",[a._v("alias")]),a._v("，"),s("code",[a._v("name")]),a._v("就是指定"),s("code",[a._v("bean")]),a._v("的，"),s("code",[a._v("alias")]),a._v("是用来设置别名的。")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("bean")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("idxxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("..."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("alias")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("alias")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("x3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("alias")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("idxxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("alias")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("idx3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),s("h5",{attrs:{id:"bean"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bean"}},[a._v("#")]),a._v(" bean")]),a._v(" "),s("p",[a._v("这个"),s("code",[a._v("bean")]),a._v("节点内容就比较多了，下面单独看吧。")]),a._v(" "),s("h4",{attrs:{id:"属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#属性"}},[a._v("#")]),a._v(" 属性")]),a._v(" "),s("p",[a._v("这里看看，"),s("code",[a._v("beans")]),a._v("都支持哪些属性。")]),a._v(" "),s("h5",{attrs:{id:"profile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#profile"}},[a._v("#")]),a._v(" profile")]),a._v(" "),s("p",[a._v("指定配置场景，支持配置多个，以"),s("code",[a._v("空格")]),a._v("/"),s("code",[a._v("逗号")]),a._v("/"),s("code",[a._v("分号")]),a._v("分割，可选。")]),a._v(" "),s("p",[a._v("通过指定配置场景，可以按需注册需要的"),s("code",[a._v("bean")]),a._v("或者"),s("code",[a._v("配置")]),a._v("。")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("beans")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("profile")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("dev,test;pro"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),s("h5",{attrs:{id:"default-lazy-init"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-lazy-init"}},[a._v("#")]),a._v(" default-lazy-init")]),a._v(" "),s("p",[s("code",[a._v("延迟初始化")]),a._v("的默认配置，对应"),s("code",[a._v("bean")]),a._v("中的"),s("code",[a._v("lazy-init")]),a._v("属性，默认值是"),s("code",[a._v("default")]),a._v("。")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"},[a._v("提示")]),s("p",[s("code",[a._v("deafult")]),a._v("代表继承"),s("code",[a._v("外部beans")]),a._v("的这个属性，一直往上找，如果没有找到就按照"),s("code",[a._v("false")]),a._v("处理。")])]),s("h5",{attrs:{id:"default-merge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-merge"}},[a._v("#")]),a._v(" default-merge")]),a._v(" "),s("p",[a._v("这个属性是针对"),s("code",[a._v("merge")]),a._v("属性的，默认值为"),s("code",[a._v("default")]),a._v("。")]),a._v(" "),s("p",[a._v("这个"),s("code",[a._v("merge")]),a._v("属性是针对"),s("code",[a._v("集合/Map")]),a._v("的，在"),s("code",[a._v("bean")]),a._v("的继承情况下，如果某个属性属于"),s("code",[a._v("集合/Map")]),a._v("，那就存在两种处理方式："),s("code",[a._v("merge")]),a._v("和"),s("code",[a._v("override")]),a._v("。")]),a._v(" "),s("p",[s("code",[a._v("merge")]),a._v("为"),s("code",[a._v("true")]),a._v("时，"),s("code",[a._v("父子bean")]),a._v("的值就会"),s("code",[a._v("merge")]),a._v("在一起；"),s("code",[a._v("merge")]),a._v("为"),s("code",[a._v("false")]),a._v("时，"),s("code",[a._v("子bean")]),a._v("就是覆盖"),s("code",[a._v("父bean")]),a._v("的值。")]),a._v(" "),s("h5",{attrs:{id:"default-autowire"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-autowire"}},[a._v("#")]),a._v(" default-autowire")]),a._v(" "),s("p",[a._v("对应"),s("code",[a._v("autowire")]),a._v("属性，默认值为"),s("code",[a._v("default")]),a._v("。\n设置自动装配的方式。")]),a._v(" "),s("h5",{attrs:{id:"default-autowire-candidates"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-autowire-candidates"}},[a._v("#")]),a._v(" default-autowire-candidates")]),a._v(" "),s("p",[a._v("对应"),s("code",[a._v("autowire-candidate")]),a._v("属性，在按类型自动装配时，确定"),s("code",[a._v("bean")]),a._v("是否作为注入的候选bean。\n但是与"),s("code",[a._v("autowire-candidate")]),a._v("有些不同，这里是配置通配符："),s("code",[a._v('"*Service", "data*", "*Service*", "data*Service"')]),a._v("。")]),a._v(" "),s("h5",{attrs:{id:"default-init-method"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-init-method"}},[a._v("#")]),a._v(" default-init-method")]),a._v(" "),s("p",[a._v("对应"),s("code",[a._v("init-method")]),a._v("方法，默认值为"),s("code",[a._v("default")]),a._v("。")]),a._v(" "),s("h5",{attrs:{id:"default-destroy-method"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-destroy-method"}},[a._v("#")]),a._v(" default-destroy-method")]),a._v(" "),s("p",[a._v("对应"),s("code",[a._v("destroy-destroy")]),a._v("方法，默认值为"),s("code",[a._v("default")]),a._v("。")]),a._v(" "),s("h3",{attrs:{id:"bean-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bean-2"}},[a._v("#")]),a._v(" bean")]),a._v(" "),s("p",[s("code",[a._v("bean")]),a._v("节点，定义一个bean，对应"),s("code",[a._v("BeanDefinition")]),a._v("。这个有很多属性，也可以嵌套很多节点。")]),a._v(" "),s("h4",{attrs:{id:"子节点-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#子节点-2"}},[a._v("#")]),a._v(" 子节点")]),a._v(" "),s("h5",{attrs:{id:"description-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#description-2"}},[a._v("#")]),a._v(" description")]),a._v(" "),s("p",[s("code",[a._v("bean")]),a._v("节点也有"),s("code",[a._v("description")]),a._v("子节点，同样的，也是只能放在第一个，至多出现一次。")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 这里不能定义其他节点 --\x3e")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("我是描述"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 这里可以定义其他节点 --\x3e")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),s("h5",{attrs:{id:"meta"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#meta"}},[a._v("#")]),a._v(" meta")]),a._v(" "),s("p",[a._v("绑定在"),s("code",[a._v("bean")]),a._v("上的"),s("code",[a._v("元数据")]),a._v("，一个键值对，可以任意多个，有两个属性："),s("code",[a._v("key")]),a._v("和"),s("code",[a._v("value")]),a._v("。")]),a._v(" "),s("p",[a._v("这个与"),s("code",[a._v("property")]),a._v("节点不同之处在于，"),s("code",[a._v("property")]),a._v("对应的是"),s("code",[a._v("bean类型")]),a._v("内部的字段，而"),s("code",[a._v("meta")]),a._v("仅在"),s("code",[a._v("bean定义")]),a._v("中使用。")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("meta")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("key")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),s("h5",{attrs:{id:"constructor-arg"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#constructor-arg"}},[a._v("#")]),a._v(" constructor-arg")]),a._v(" "),s("p",[a._v("注入构造器参数，配置了这个，在初始化"),s("code",[a._v("bean")]),a._v("的时候，就会把这些参数解析出来，注入进去。")]),a._v(" "),s("p",[a._v("这个也可以配置一个"),s("code",[a._v("description")]),a._v("的子节点。")]),a._v(" "),s("p",[a._v("其属性有：")]),a._v(" "),s("ul",[s("li",[a._v("index")]),a._v(" "),s("li",[a._v("name")]),a._v(" "),s("li",[a._v("type")]),a._v(" "),s("li",[a._v("ref")]),a._v(" "),s("li",[a._v("value")])]),a._v(" "),s("p",[a._v("从这些属性来看，支持"),s("code",[a._v("索引")]),a._v("，"),s("code",[a._v("参数名")]),a._v("，"),s("code",[a._v("参数类型")]),a._v("方式，参数值支持"),s("code",[a._v("bean引用")]),a._v("和"),s("code",[a._v("值")]),a._v("的方式。")]),a._v(" "),s("p",[a._v("另外，参数值还可以采用嵌套子节点的方式：")]),a._v(" "),s("ul",[s("li",[a._v("bean")]),a._v(" "),s("li",[a._v("ref")]),a._v(" "),s("li",[a._v("idref")]),a._v(" "),s("li",[a._v("value")]),a._v(" "),s("li",[a._v("null")]),a._v(" "),s("li",[a._v("array")]),a._v(" "),s("li",[a._v("list")]),a._v(" "),s("li",[a._v("set")]),a._v(" "),s("li",[a._v("map")]),a._v(" "),s("li",[a._v("props")])]),a._v(" "),s("h5",{attrs:{id:"property"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#property"}},[a._v("#")]),a._v(" property")]),a._v(" "),s("p",[a._v("这个就是"),s("code",[a._v("bean类型")]),a._v("的字段，符合"),s("code",[a._v("JavaBean")]),a._v("命名。")]),a._v(" "),s("h5",{attrs:{id:"qualifier"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#qualifier"}},[a._v("#")]),a._v(" qualifier")]),a._v(" "),s("p",[a._v("这个注入时的限定条件，可以为注入更好查找候选bean。")]),a._v(" "),s("h5",{attrs:{id:"lookup-method"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lookup-method"}},[a._v("#")]),a._v(" lookup-method")]),a._v(" "),s("p",[a._v("配置该节点，会让Spring容器覆盖指定方法的实现，返回指定的"),s("code",[a._v("bean")]),a._v("，该方法会触发"),s("code",[a._v("getBean")]),a._v("方法。\n这个具体用法之后再看吧。")]),a._v(" "),s("h5",{attrs:{id:"replaced-method"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#replaced-method"}},[a._v("#")]),a._v(" replaced-method")]),a._v(" "),s("p",[a._v("该节点的作用是方法注入，替换实现。")]),a._v(" "),s("h4",{attrs:{id:"属性-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#属性-2"}},[a._v("#")]),a._v(" 属性")]),a._v(" "),s("ul",[s("li",[a._v("id")]),a._v(" "),s("li",[a._v("name")]),a._v(" "),s("li",[a._v("class")]),a._v(" "),s("li",[a._v("parent")]),a._v(" "),s("li",[a._v("scope")]),a._v(" "),s("li",[a._v("abstract")]),a._v(" "),s("li",[a._v("lazy-init")]),a._v(" "),s("li",[a._v("autowire")]),a._v(" "),s("li",[a._v("depends-on")]),a._v(" "),s("li",[a._v("autowire-candidate")]),a._v(" "),s("li",[a._v("primary")]),a._v(" "),s("li",[a._v("init-method")]),a._v(" "),s("li",[a._v("destroy-method")]),a._v(" "),s("li",[a._v("factory-method")]),a._v(" "),s("li",[a._v("factory-bean")])]),a._v(" "),s("p",[a._v("这些属性前面都看到过，具体使用场景在后面的XML解析中再看吧。")]),a._v(" "),s("h2",{attrs:{id:"结论"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#结论"}},[a._v("#")]),a._v(" 结论")]),a._v(" "),s("p",[a._v("这个XSD就是"),s("code",[a._v("BeanDefinition")]),a._v("的说明文档，"),s("code",[a._v("属性")]),a._v("和"),s("code",[a._v("节点")]),a._v("有很多，具体的使用场景还是要到代码里去看。")])])}),[],!1,null,null,null);t.default=n.exports}}]);